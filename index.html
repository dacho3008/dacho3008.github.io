<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="BERGHEIM TOTAL: Deutschlandweite Plattform fÃ¼r Services, Kultur, Religion, Jobs, Vermisste, Schwarzes Brett â€“ kostenlos fÃ¼r Vereine! Skalierbar bis 2030. DSGVO-konform.">
  <meta name="keywords" content="Bergheim, NRW, Deutschland, Notdienste, Vermisste, Museen, Kirchen, Moscheen, Jobs, Events, Unternehmen, BehÃ¶rden, Gerichte, Schwarzes Brett, Inklusion, Barrierefrei">
  <meta name="author" content="Joshua Blum, BERGHEIM TOTAL, Alle Rechte vorbehalten">
  <title>BERGHEIM TOTAL ðŸ‘‘ â€“ Von Bergheim zu Deutschland</title>
  <link rel="manifest" href="/manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.338/pdf.min.js"></script>
  <style>
    body { font-family: 'Roboto', sans-serif; margin: 0; padding: 0; background: #f4f4f4; color: #333; overflow-x: hidden; }
    header { background: #007bff; color: white; text-align: center; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
    nav a { color: white; margin: 0 12px; text-decoration: none; font-weight: bold; transition: color 0.3s; cursor: pointer; }
    nav a:hover { color: #ffeb3b; }
    .container { max-width: 1200px; margin: auto; padding: 20px; }
    .section { border: 1px solid #ddd; padding: 15px; margin: 10px 0; background: white; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: transform 0.2s; }
    .section:hover { transform: scale(1.02); }
    .section img { max-width: 100%; border-radius: 8px; margin-top: 10px; }
    .priority { background: #ffeb3b; border-left: 5px solid #ffc107; }
    .search-bar { width: 100%; padding: 12px; font-size: 16px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; }
    .filter-btn { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; cursor: pointer; border-radius: 4px; transition: background 0.3s; }
    .filter-btn:hover { background: #0056b3; }
    footer { background: #007bff; color: white; text-align: center; padding: 15px; margin-top: 30px; border-top: 3px solid #ffeb3b; }
    .cta-button { background: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin-top: 10px; transition: background 0.3s; }
    .cta-button:hover { background: #218838; }
    .category-header { font-size: 1.5em; color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-bottom: 20px; }
    .grid-categories { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px; }
    .grid-button { background: #ffffff; border: 1px solid #ddd; padding: 20px; text-align: center; border-radius: 8px; cursor: pointer; transition: background 0.3s, transform 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .grid-button:hover { background: #e9ecef; transform: scale(1.05); }
    .grid-button h3 { margin: 10px 0; color: #007bff; }
    .grid-button p { font-size: 0.9em; color: #666; }
    .hidden { display: none; }
    #login-section, #social-media-section, #blackboard-section, #profile-section { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
    #blackboard-posts { margin-top: 20px; }
    #blackboard-form, #social-media-form, #profile-form { display: flex; flex-direction: column; gap: 10px; }
    #blackboard-form input, #blackboard-form textarea, #social-media-form input, #social-media-form textarea, #profile-form input { padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
    #blackboard-form button, #social-media-form button, #profile-form button { background: #28a745; color: white; padding: 10px; border: none; border-radius: 4px; cursor: pointer; }
    #blackboard-form button:hover, #social-media-form button:hover, #profile-form button:hover { background: #218838; }
    #location-status { margin-top: 10px; font-style: italic; }
    #pdf-viewer { height: 400px; border: 1px solid #ddd; margin-top: 10px; }
    @media (max-width: 600px) { .section { font-size: 14px; } .filter-btn { width: 100%; } .grid-categories { grid-template-columns: 1fr; } }
    /* Barrierefrei: WCAG 2.1, ARIA, Kontraste */
    a { color: #007bff; text-decoration: underline; }
    button:focus, input:focus, select:focus { outline: 2px solid #007bff; }
    /* Cookie-Banner */
    #cookie-banner { position: fixed; bottom: 0; background: #fff; padding: 10px; width: 100%; border-top: 1px solid #ddd; display: none; box-shadow: 0 -2px 4px rgba(0,0,0,0.1); z-index: 1000; }
    /* Copyright Notice */
    .copyright { font-size: 0.8em; color: #888; text-align: center; margin-top: 20px; }
  </style>
</head>
<body>
  <header role="banner">
    <h1>BERGHEIM TOTAL ðŸ‘‘ â€“ Von Bergheim zu Deutschland!</h1>
    <p>Verbinde ALLE: Services, Kultur, Religion, Jobs, Soziale Projekte, Schwarzes Brett â€“ kostenlos fÃ¼r Vereine! 2030-ready! DSGVO-konform.</p>
    <nav aria-label="HauptmenÃ¼">
      <a onclick="showSection('region')">Region</a>
      <a onclick="showSection('notdienste')">Notdienste</a>
      <a onclick="showSection('vermisste')">Vermisste</a>
      <a onclick="showSection('kultur-religion')">Kultur & Religion</a>
      <a onclick="showSection('jobs-events')">Jobs & Events</a>
      <a onclick="showSection('unternehmen')">Unternehmen</a>
      <a onclick="showSection('behoerden-gerichte')">BehÃ¶rden & Gerichte</a>
      <a onclick="showSection('services')">Andere Services</a>
      <a onclick="showSection('blackboard')">Schwarzes Brett</a>
      <a onclick="showSection('social-media')">Social Media Werbung</a>
      <a onclick="showSection('profile')">Profil verwalten</a>
      <a onclick="showSection('kontakt')">Kontakt</a>
    </nav>
  </header>

  <div class="container">
    <!-- Profil-Verwaltung -->
    <div id="profile-section" class="hidden">
      <h2>Profil verwalten</h2>
      <p>Anpassen, was Sie sehen wollen/nicht wollen (z.B. Kategorien filtern). DSGVO-konform: Lokale Speicherung.</p>
      <form id="profile-form">
        <label><input type="checkbox" id="show-notdienste" checked> Notdienste anzeigen</label>
        <label><input type="checkbox" id="show-vermisste" checked> Vermisste anzeigen</label>
        <label><input type="checkbox" id="show-kultur" checked> Kultur & Religion anzeigen</label>
        <label><input type="checkbox" id="show-jobs" checked> Jobs & Events anzeigen</label>
        <label><input type="checkbox" id="show-unternehmen" checked> Unternehmen anzeigen</label>
        <label><input type="checkbox" id="show-behoerden" checked> BehÃ¶rden & Gerichte anzeigen</label>
        <label><input type="checkbox" id="show-blackboard" checked> Schwarzes Brett anzeigen</label>
        <button type="button" onclick="saveProfilePreferences()">Speichern</button>
      </form>
      <p id="profile-status"></p>
    </div>

    <!-- Weitere Sektionen wie zuvor, mit Inhalten -->

    <!-- Schwarzes Brett mit PDF-Reader -->
    <div id="blackboard-section" class="hidden">
      <div class="category-header">ðŸ“Œ Schwarzes Brett</div>
      <p>Posten Sie AuftrÃ¤ge, EinkÃ¤ufe, Catering oder erstellen Sie Rechnungen/Ausschreibungen als PDF.</p>
      <form id="blackboard-form">
        <input type="text" id="bb-title" placeholder="Titel (z.B. Catering fÃ¼r 50 Personen)" required>
        <textarea id="bb-description" placeholder="Beschreibung" required></textarea>
        <input type="text" id="bb-contact" placeholder="Kontakt (Tel/Email)" required>
        <input type="text" id="bb-invoice" placeholder="Rechnungstext (z.B. Betrag: 500â‚¬)" aria-label="Rechnungsdetails">
        <input type="file" id="bb-pdf-file" accept=".pdf" aria-label="PDF hochladen zum Ã–ffnen">
        <button type="button" onclick="postToBlackboard()">Posten</button>
        <button type="button" onclick="generatePDF()">PDF erstellen</button>
        <button type="button" onclick="openPDFReader()">PDF Ã¶ffnen/lesen</button>
      </form>
      <div id="pdf-viewer"></div> <!-- PDF-Viewer Container -->
      <div id="blackboard-posts"></div>
      <a href="https://wa.me/491631234567" class="cta-button">Premium-Post</a>
    </div>

    <!-- Copyright -->
    <div class="copyright">
      Â© 2025 Joshua Blum, BERGHEIM TOTAL. Alle Rechte vorbehalten. GeschÃ¼tzt durch Urheberrecht. Marke beim DPMA registriert. Keine Kopie ohne Erlaubnis.
    </div>

    <!-- Cookie-Banner -->
    <div id="cookie-banner" role="alert">
      Wir nutzen Cookies fÃ¼r Personalisierung (DSGVO-konform). <button onclick="acceptCookies()">OK</button>
    </div>

    <!-- JavaScript -->
    <script>
      // ... Vorherige Funktionen (showSection, renderContent, getUserLocation, postToBlackboard, renderBlackboardPosts, postSocialMedia, acceptCookies, simulateLogin) ...

      // Profil-Verwaltung
      function saveProfilePreferences() {
        const preferences = {
          showNotdienste: document.getElementById('show-notdienste').checked,
          showVermisste: document.getElementById('show-vermisste').checked,
          showKultur: document.getElementById('show-kultur').checked,
          showJobs: document.getElementById('show-jobs').checked,
          showUnternehmen: document.getElementById('show-unternehmen').checked,
          showBehoerden: document.getElementById('show-behoerden').checked,
          showBlackboard: document.getElementById('show-blackboard').checked
        };
        localStorage.setItem('profilePreferences', JSON.stringify(preferences));
        document.getElementById('profile-status').textContent = 'Preferences gespeichert! (DSGVO: Lokale Speicherung)';
        loadProfilePreferences();
      }
      function loadProfilePreferences() {
        const prefs = JSON.parse(localStorage.getItem('profilePreferences')) || {};
        document.getElementById('show-notdienste').checked = prefs.showNotdienste !== false;
        // Ã„hnlich fÃ¼r andere â€“ und filtere Sektionen basierend auf prefs (z.B. hide Sektionen, wenn unchecked)
      }
      loadProfilePreferences();

      // PDF-Ã–ffnen mit pdf.js
      function openPDFReader() {
        const file = document.getElementById('bb-pdf-file').files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = e => {
            pdfjsLib.getDocument(e.target.result).promise.then(pdf => {
              pdf.getPage(1).then(page => {
                const canvas = document.createElement('canvas');
                const viewport = page.getViewport({ scale: 1.5 });
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                page.render({ canvasContext: canvas.getContext('2d'), viewport: viewport });
                document.getElementById('pdf-viewer').innerHTML = '';
                document.getElementById('pdf-viewer').appendChild(canvas);
              });
            });
          };
          reader.readAsArrayBuffer(file);
        } else {
          alert('Laden Sie eine PDF hoch!');
        }
      }

      // Initial
      document.getElementById('grid-categories').style.display = 'grid';
      renderContent();
    </script>
  </body>
</html>
